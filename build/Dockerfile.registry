FROM quay.io/openshift/origin-operator-registry

COPY manifests /registry

# Initialize the database
RUN rm -rf /registry/generated && \
    initializer --manifests /registry --output bundles.db

# There are multiple binaries in the origin-operator-registry
# We want the registry-server
ENTRYPOINT ["registry-server"]
CMD ["--database", "bundles.db"]
